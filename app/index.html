<!doctype html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sheridan IMM 2016: Rediscover</title>

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Web Application Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Web Starter Kit">
    <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Web Starter Kit">
    <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#2F3BA2">

    <!-- Color the status bar on mobile devices -->
    <meta name="theme-color" content="#2F3BA2">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="styles/main.css">
  </head>
  <body>
    <!-- Add your site or app content here -->
    <main id="bg--threejs">
       <section class="section--info" >
    
          <p>SHERIDAN IMM 2016 GRADS PRESENT:</p>
    
          <section class="section--logotype">
            <h1>REDISCOVER</h1>
    
            <!-- animate this in a loop? -->
            <h2>REIMAGINE</h2>
          </section>
    
          <section class="section--details">
            <div class="container--location">
              <p>DESIGN COFOUNDERS</p>
            </div>
    
            <div class="container--date">
                <p>WEDNESDAY APRIL 27,2016</p>
            </div>
          </section>
    
          <h3>COMING SOON!</h3>
    
          <p>WE'RE WORKING ON SOMETHING AMAZING! SIGN UP &amp; GET NOTIFIED!</p>
    
          <form class="" action="" method="post">
            <input type="email" name="email" value="" placeholder="Email Address">
            <input type="submit" name="email" value="Send">
          </form>
    
      </section>
    </main>

    <footer>
      <!-- social media icons here -->
    </footer>

    <!-- build:js scripts/main.min.js -->
    <script src="scripts/main.js"></script>
    <!-- endbuild -->

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-XXXXX-X', 'auto');
      ga('send', 'pageview');
    </script>

    <script src="scripts/threejs/DeviceOrientationController.js"></script>
    <script src="scripts/threejs/OrbitControls-Touch.js"></script>

  <script src="http://cdnjs.cloudflare.com/ajax/libs/three.js/r74/three.min.js"></script>
    
    <script type="text/javascript">
      var mouse = [.5, .5];
      var dis = 100;
      /*scene*/
      var scene = new THREE.Scene();
      scene.fog = new THREE.FogExp2( "red", 0.0003);
      /*camera*/
      var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)

      /*renderer*/
      var renderer = new THREE.WebGLRenderer({antialias:true}); //create canvas
      renderer.setSize(window.innerWidth, window.innerHeight); //set canvas size;
      renderer.setClearColor(new THREE.Color(0x292a5d, 1.0));// set rendering background color
      document.getElementById("bg--threejs").appendChild(renderer.domElement); // pass in _canvas
      window.addEventListener("resize", function(){
        renderer.setSize(window.innerWidth, window.innerHeight);
      })


      /*geometry*/
      var geometry = new THREE.BoxGeometry( 20, 20, 20 );
      var material = new THREE.MeshBasicMaterial( { color: "pink" } );
      var cube = new THREE.Mesh( geometry, material );
      // cube.position.set(0,80,11);

      /*skybox*/
      var skyBoxGeometry = new THREE.BoxGeometry(100000, 100000, 100000);
      var skyBoxMaterial = new THREE.MeshBasicMaterial({color:"white", side:THREE.BackSide});
      var skyBox = new THREE.Mesh(skyBoxGeometry, skyBoxMaterial);
      scene.add(skyBox);
        var cloud;
        var cloud2;
        var cloud3;
        var cloud4;
        function createPointCloud(arg){
          var texture = new THREE.TextureLoader().load(arg.img);
          var geom = new THREE.Geometry();
          var material = new THREE.PointsMaterial({
            size: 11,
            transparent:true,
            opacity:0.5,
            map: texture,
            sizeAttenuation:false,
            color:0xffffff,
            blending: THREE.AdditiveBlending,
          })
          var num= arg.num; 
          var range = 500;
          for (var i = 0; i < num; i++) {
            var particle = new THREE.Vector3(
              Math.random()*range-range/2,
              Math.random()*range-range/2,
              Math.random()*range-range/2
              )
            geom.vertices.push(particle);
          };
          return {
            geom:geom,
            material :material 
          }
        } 

        var a = createPointCloud({img:'images/threejs/6-06.png',num:100,size:100,})
        cloud = new THREE.Points(a.geom, a.material);
        scene.add(cloud);
        var b = createPointCloud({img:"images/threejs/7-07.png",num:70,size:100,})
        cloud2 = new THREE.Points(b.geom, b.material);
        scene.add(cloud2);
        var c = createPointCloud({img:"images/threejs/8-08.png",num:60,size:100,})
        cloud3 = new THREE.Points(c.geom, c.material);
        scene.add(cloud3);
    
 
        function createPointCloud4(img){
          var texture = new THREE.TextureLoader().load(img);
          var geom = new THREE.Geometry();
          var material = new THREE.PointsMaterial({
            size: 7,
            transparent:true,
            opacity:0.2,
            map: texture,
            sizeAttenuation:true,
            color:0xffffff,
            // blending: THREE.MultiplyBlending,
          })
          var num= 1; 
          var range = 1;
          for (var i = 0; i < num; i++) {
            var particle = new THREE.Vector3(
              Math.random()*range-range/2,
             0.4,
              Math.random()*range-range/2-10
              )
            geom.vertices.push(particle);
          };
          // geom.lookAt(camera.position)
          geom.applyMatrix(new THREE.Matrix4().makeTranslation(-1,-1,7));

          cloud4 = new THREE.Points(geom, material);
          cloud4.name ="pointCloud";
          scene.add(cloud4);
        } 
        createPointCloud4("images/imm2016logotype_lgbg.svg")

// 
      var light = new THREE.PointLight(0xffffff);
      light.lookAt(scene.position);
      light.position.set(40,170,11);
      light.castShadow = true;
      scene.add(light);
      var light = new THREE.AmbientLight( 0x404040 ); // soft white light
      scene.add( light );

      window.addEventListener( 'mousemove', onMouseMove, false );
      function onMouseMove(ev) {
        var vector = new THREE.Vector3( event.clientX - window.innerWidth/2, - event.clientY + window.innerHeight/2, 0 );

      }

      var controls = new DeviceOrientationController( camera);
      controls.connect();


      console.log(cloud.geometry.vertices);
      function render() {
            controls.update();
            cloud.rotation.x += 0.0001;
            cloud.rotation.z += 0.001;
            cloud2.rotation.x += 0.0008;
            cloud2.rotation.z += 0.002;
            cloud3.rotation.y += 0.0008;
            cloud3.rotation.z += 0.002;
            cloud4.rotation.z += 0.002;
        requestAnimationFrame( render );
        renderer.render( scene, camera );
      }
      render();
    </script>
  </body>
</html>
